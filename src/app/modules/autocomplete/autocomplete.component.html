<div id="autoComplete"
  class="autoCompleteGoogle">
  <form [formGroup]="autoCompleteGoogleForm"
    (ngSubmit)="onSubmit()"
    autocomplete="off"
    [ngClass]="{'date-range-enabled':showDateRange}">
    <div class="input-container"
      style="display:inline-block">
      <app-jw-google-autocomplete [ngStyle]="{ 'direction' : direction}"
        id="addressBar"
        autocorrect="off"
        autocapitalize="off"
        spellcheck="off"
        formControlName="googleSearch"
        class="autocompleteWrapper"
        (latLng)="onLatLngEvent($event,autoCompleteGoogleForm.get('googleSearch'))"
        (modelChange)="clearLatLng()"
        [placeholder]="config.data.placeholder_text ? config.data.placeholder_text : placeholder || 'Please select a location'"></app-jw-google-autocomplete>
      <div (click)="getUserLocation()"
        class="auto-detect">
        <span *ngIf="fetchingLocation" class="inline-flex f-j-c f-a-c"><i class="fa fa-circle-o-notch fa-spin"></i> <span class="hidden-xs" style="font-size: 1.2rem">{{languageStrings.loading || 'Loading'}}</span></span>
        <span *ngIf="!fetchingLocation" class="f-j-c f-a-c"><img src="assets/images/aim.svg"></span>

      </div>
      <!-- <input #search type="text" autocomplete="off" #search id="addressBar" [ngStyle]="{ 'direction' : direction }"
        formControlName="googleSearch" class="form-control search" [placeholder]="config.data.placeholder_text || 'Enter your delivery location'" /> -->
      <app-control-messages [control]="autoCompleteGoogleForm.get('googleSearch')"></app-control-messages>
    </div>

    <!-- date range -->

    <div class="date-range-container"
      *ngIf="showDateRange"
      (click)="drp.show()">
      <input type="text"
        class="form-control"
        [bsConfig]="bsConfig"
        #drp="bsDaterangepicker"
        bsDaterangepicker
        aria-label="date picker"
        [placement]="dateRangePlacement"
        formControlName="checkInDate"
        [minDate]="minDate"
        style="visibility:hidden;pointer-events: none;width:100%;position: absolute;right: 0;">
      <div class="calendar-image"></div>
      <div class="checkin-checkout">
        <span class="heading">{{terminology.CHECK_IN}}</span>
        <span class="date">{{autoCompleteGoogleForm.controls.checkInDate.value[0]| dateTimeFormat: 'MMM d, y'}}</span>
      </div>
      <div class="v-line"></div>
      <div class="checkin-checkout">
        <span class="heading">{{terminology.CHECK_OUT}}</span>
        <span class="date">{{autoCompleteGoogleForm.controls.checkInDate.value[1]| dateTimeFormat: 'MMM d, y'}}</span>
      </div>
    </div>

    <button class="btn search-button">{{config.data.search_text}}</button>
  </form>
  <div class="errorpop" *ngIf="showFetchingLocationError">
    <div class="dFlex">
        <!-- <span>
          <i class="fa fa-times-circle" aria-hidden="true"></i>
        </span> -->
        <span style="margin-left: 5px;margin-right: 5px;">{{languageStrings.unable_to_fetch_your_location || 'Unable to fetch your location'}}</span>
    </div>
    <div class="cross-class">
        <span class="times" (click)="showFetchingLocationError = ''">
          <i class="fa fa-times" ></i>
        </span>
    </div>
  </div> 
  <div class="infopop" *ngIf="infoMessage">
    <div class="dFlex">
        <!-- <span>
          <i class="fa fa-info-circle" aria-hidden="true"></i>
        </span> -->
      <span style="margin-left: 5px;margin-right: 5px;">{{languageStrings.unable_to_fetch_your_location || 'Unable to fetch your location'}}</span>
    </div>
    <div class="cross-class">
         <span class="times" (click)="infoMessage = false">
          <i class="fa fa-times" ></i>
        </span>
    </div>
  </div>
</div>
